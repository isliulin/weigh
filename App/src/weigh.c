/**
  ******************************************************************************
  * @文件    weigh.c
  * @作者    zhaoxw
  * @版本    V0.0.0
  * @日期    2017-09-17
  * @概述    Main program body
  ******************************************************************************
  * @attention
  *
  * 
  *
  ******************************************************************************
  */ 
#include "weigh.h"

WEIGH WeightNow[MAX_CHANNEL];                //传感器数值
WEIGH WeightEmpty[MAX_CHANNEL];              //空载传感器值
WEIGH WeightSet[MAX_CHANNEL];                //设定的报警值
WEIGH WeightCalibration[MAX_CHANNEL];        //标定值

/*******************************************************************************
*名    称: 
*功    能: 
*入口参数: 
*出口参数: 
*说    明: 
*******************************************************************************/
void WeighInit(void)
{
    //1：读取保存的参数
	
    //2：根据标定值计算报警值
	
    //3：
}

/*******************************************************************************
*名    称: 
*功    能: 更新传感器值
*入口参数: 
*出口参数: 
*说    明: 
*******************************************************************************/
void UpdateSensorValue(u16 * Data)
{
    u8 i;
    
    for(i = 0; i < MAX_CHANNEL; i++)
    {
        WeightNow[i].Sensor = Data[i];
    }
}

/*******************************************************************************
*名    称: 
*功    能: 更新传感器值
*入口参数: 
*出口参数: 
*说    明: 
*******************************************************************************/
void GetWeightValue(u16 * Data)
{
    u8 i;
    
    for(i = 0; i < MAX_CHANNEL; i++)
    {
        
        
        Data[i] = WeightNow[i].Weigh;
    }
}
/*******************************************************************************
*名    称: 
*功    能: 计算报警值
*入口参数: 
*出口参数: 
*说    明: 
*******************************************************************************/
void CalcAlaWeight(void)
{
    //1：根据标定值计算报警值
//    （WeighZero[0] - WeighCalibration[0].Sensor）/ 
    //2：
    //3：
}

/*******************************************************************************
*名    称: 
*功    能: 判定是否到达报警值
*入口参数: 
*出口参数: 与报警值之间的差距，数值越大越接近
*说    明: 
*******************************************************************************/
u8 JudgeAlaWeight(void)
{
    u8 Level = 0;
    
    //1：
    //2：
    //3：
    
    return Level;
}
/********************************END OF WEIGH**********************************/
